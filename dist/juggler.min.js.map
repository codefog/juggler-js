{"version":3,"sources":["juggler.js"],"names":["window","initJuggler","registry","resize","forEach","entry","matches","matchMedia","mediaQuery","location","target","parentNode","insertBefore","el","nextSibling","source","Array","prototype","slice","call","document","querySelectorAll","juggler","dataset","jugglerTarget","els","length","Error","sourceComment","createComment","targetComment","push","jugglerMediaQuery","replaceChild","addEventListener"],"mappings":"CAAC,WACG,aAEAA,OAAOC,YAAc,WACjB,IAAIC,EAAW,GAmCf,SAASC,IACLD,EAASE,QAAQ,SAAUC,GACvB,IAAIC,EAAUN,OAAOO,WAAWF,EAAMG,YAAYF,QAG9CA,GAA8B,WAAnBD,EAAMI,UACjBJ,EAAMK,OAAOC,WAAWC,aAAaP,EAAMQ,GAAIR,EAAMK,OAAOI,aAC5DT,EAAMI,SAAW,UACTH,GAA8B,WAAnBD,EAAMI,WAEzBJ,EAAMU,OAAOJ,WAAWC,aAAaP,EAAMQ,GAAIR,EAAMU,OAAOD,aAC5DT,EAAMI,SAAW,YA5C7BO,MAAMC,UAAUC,MAAMC,KAAKC,SAASC,iBAAiB,0BAA0BjB,QAAQ,SAAUkB,GAC7F,IAAIZ,EAASY,EAAQC,QAAQC,cACzBC,EAAML,SAASC,iBAAiB,yBAA2BX,EAAS,MAGxE,GAAmB,IAAfe,EAAIC,OACJ,MAAM,IAAIC,MAAM,uBAAyBjB,EAAS,qBAItD,GAAiB,EAAbe,EAAIC,OACJ,MAAM,IAAIC,MAAM,uBAAyBjB,EAAS,oBAAsBe,EAAIC,OAAS,8BAGzF,IAAIb,EAAKY,EAAI,GACTG,EAAgBR,SAASS,cAAc,mBAAqBnB,GAC5DoB,EAAgBV,SAASS,cAAc,mBAAqBnB,GAEhER,EAAS6B,KAAK,CACVtB,SAAU,SACVI,GAAIA,EACJE,OAAQa,EACRlB,OAAQoB,EACRtB,WAAYc,EAAQC,QAAQS,oBAIhCnB,EAAGF,WAAWC,aAAagB,EAAef,GAG1CS,EAAQX,WAAWsB,aAAaH,EAAeR,KAmBnDnB,IACAH,OAAOkC,iBAAiB,SAAU/B,IAxD1C","file":"juggler.min.js","sourcesContent":["(function () {\n    'use strict';\n\n    window.initJuggler = function () {\n        var registry = [];\n\n        Array.prototype.slice.call(document.querySelectorAll('[data-juggler-target]')).forEach(function (juggler) {\n            var target = juggler.dataset.jugglerTarget;\n            var els = document.querySelectorAll('[data-juggler-source=\"' + target + '\"]');\n\n            // Throw an error if the source element has been not found\n            if (els.length === 0) {\n                throw new Error('The element source \"' + target + '\" does not exist.');\n            }\n\n            // Throw an error if the number of source elements is bigger than one\n            if (els.length > 1) {\n                throw new Error('The element source \"' + target + '\" is not unique. ' + els.length + ' elements have been found.');\n            }\n\n            var el = els[0];\n            var sourceComment = document.createComment('Juggler source: ' + target);\n            var targetComment = document.createComment('Juggler target: ' + target);\n\n            registry.push({\n                location: 'source',\n                el: el,\n                source: sourceComment,\n                target: targetComment,\n                mediaQuery: juggler.dataset.jugglerMediaQuery\n            });\n\n            // Prepend the source comment to element\n            el.parentNode.insertBefore(sourceComment, el);\n\n            // Replace the element with target comment\n            juggler.parentNode.replaceChild(targetComment, juggler);\n        });\n\n        function resize() {\n            registry.forEach(function (entry) {\n                var matches = window.matchMedia(entry.mediaQuery).matches;\n\n                // Move the element from source to target\n                if (matches && entry.location === 'source') {\n                    entry.target.parentNode.insertBefore(entry.el, entry.target.nextSibling);\n                    entry.location = 'target';\n                } else if (!matches && entry.location === 'target') {\n                    // Move the element from target to source\n                    entry.source.parentNode.insertBefore(entry.el, entry.source.nextSibling);\n                    entry.location = 'source';\n                }\n            });\n        }\n\n        resize();\n        window.addEventListener('resize', resize);\n    };\n}());\n"]}