{"version":3,"sources":["juggler.js"],"names":["window","initJuggler","resize","registry","forEach","entry","matches","matchMedia","mediaQuery","location","target","parentNode","insertBefore","el","nextSibling","source","Array","from","document","querySelectorAll","juggler","dataset","jugglerTarget","els","length","Error","sourceComment","createComment","targetComment","push","jugglerMediaQuery","replaceChild","addEventListener"],"mappings":"CAAC,WACG,aAEAA,OAAOC,YAAc,WAoCjB,SAASC,IACLC,EAASC,QAAQ,SAAUC,GACvB,IAAIC,EAAUN,OAAOO,WAAWF,EAAMG,YAAYF,QAG9CA,GAA8B,WAAnBD,EAAMI,UACjBJ,EAAMK,OAAOC,WAAWC,aAAaP,EAAMQ,GAAIR,EAAMK,OAAOI,aAC5DT,EAAMI,SAAW,UACTH,GAA8B,WAAnBD,EAAMI,WAEzBJ,EAAMU,OAAOJ,WAAWC,aAAaP,EAAMQ,GAAIR,EAAMU,OAAOD,aAC5DT,EAAMI,SAAW,YA9C7B,IAAIN,KAEJa,MAAMC,KAAKC,SAASC,iBAAiB,0BAA0Bf,QAAQ,SAAUgB,GAC7E,IAAIV,EAASU,EAAQC,QAAQC,cACzBC,EAAML,SAASC,iBAAiB,yBAA2BT,EAAS,MAGxE,GAAmB,IAAfa,EAAIC,OACJ,MAAM,IAAIC,MAAM,uBAAyBf,EAAS,qBAItD,GAAIa,EAAIC,OAAS,EACb,MAAM,IAAIC,MAAM,uBAAyBf,EAAS,oBAAsBa,EAAIC,OAAS,8BAGzF,IAAIX,EAAKU,EAAI,GACTG,EAAgBR,SAASS,cAAc,mBAAqBjB,GAC5DkB,EAAgBV,SAASS,cAAc,mBAAqBjB,GAEhEP,EAAS0B,MACLpB,SAAU,SACVI,GAAIA,EACJE,OAAQW,EACRhB,OAAQkB,EACRpB,WAAYY,EAAQC,QAAQS,oBAIhCjB,EAAGF,WAAWC,aAAac,EAAeb,GAG1CO,EAAQT,WAAWoB,aAAaH,EAAeR,KAmBnDlB,IACAF,OAAOgC,iBAAiB,SAAU9B,IAxD1C","file":"juggler.min.js","sourcesContent":["(function () {\n    'use strict';\n\n    window.initJuggler = function () {\n        var registry = [];\n\n        Array.from(document.querySelectorAll('[data-juggler-target]')).forEach(function (juggler) {\n            var target = juggler.dataset.jugglerTarget;\n            var els = document.querySelectorAll('[data-juggler-source=\"' + target + '\"]');\n\n            // Throw an error if the element has been not found\n            if (els.length === 0) {\n                throw new Error('The element source \"' + target + '\" does not exist.');\n            }\n\n            // Throw an error if the number of elements is\n            if (els.length > 1) {\n                throw new Error('The element source \"' + target + '\" is not unique. ' + els.length + ' elements have been found.');\n            }\n\n            var el = els[0];\n            var sourceComment = document.createComment('Juggler source: ' + target);\n            var targetComment = document.createComment('Juggler target: ' + target);\n\n            registry.push({\n                location: 'source',\n                el: el,\n                source: sourceComment,\n                target: targetComment,\n                mediaQuery: juggler.dataset.jugglerMediaQuery\n            });\n\n            // Prepend the source comment to element\n            el.parentNode.insertBefore(sourceComment, el);\n\n            // Replace the element with target comment\n            juggler.parentNode.replaceChild(targetComment, juggler);\n        });\n\n        function resize() {\n            registry.forEach(function (entry) {\n                var matches = window.matchMedia(entry.mediaQuery).matches;\n\n                // Move the element from source to target\n                if (matches && entry.location === 'source') {\n                    entry.target.parentNode.insertBefore(entry.el, entry.target.nextSibling);\n                    entry.location = 'target';\n                } else if (!matches && entry.location === 'target') {\n                    // Move the element from target to source\n                    entry.source.parentNode.insertBefore(entry.el, entry.source.nextSibling);\n                    entry.location = 'source';\n                }\n            });\n        }\n\n        resize();\n        window.addEventListener('resize', resize);\n    };\n}());\n"]}